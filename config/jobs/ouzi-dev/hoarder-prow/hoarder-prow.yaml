presubmits:
  ouzi-dev/hoarder-prow:
    # https://github.com/kubernetes/test-infra/blob/master/prow/inrepoconfig.md
    - name: validate-prow-yaml
      always_run: true
      decorate: true
      clone_uri: "git@github.com:ouzi-dev/hoarder-prow.git"
      trigger: "(?m)validate-prow-yaml( please)?" 
      rerun_command: "validate-prow-yaml"
      extra_refs:
        - org: ouzi-dev
          repo: test-infra
          base_ref: master
      spec:
        tolerations:
          - effect: NoSchedule
            key: cloud.google.com/gke-preemptible
            operator: Equal
            value: "true"
        containers:
        - command:
            - /app/prow/cmd/checkconfig/app.binary
          args:
            - --config-path=prow/config.yaml
            - --plugin-config=prow/plugins.yaml
            - --job-config-path=config/jobs
          image: gcr.io/k8s-prow/checkconfig:v20200610-6c96a0a6ed
    - name: validate-no-creds
      always_run: true
      decorate: true
      clone_uri: "git@github.com:ouzi-dev/hoarder-prow.git"
      trigger: "(?m)validate-no-creds( please)?" 
      rerun_command: "validate-no-creds"
      spec:
        tolerations:
          - effect: NoSchedule
            key: cloud.google.com/gke-preemptible
            operator: Equal
            value: "true"
        containers:
        - image: quay.io/ouzi/git-secret-scanner:0.0.3
          command:
          - git-secrets
          args:
          - --scan